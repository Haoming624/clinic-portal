<!-- Search and Filter Form -->
<%= form_with url: receptionist_dashboard_path, method: :get, local: true, class: "row g-3 align-items-end mb-4" do %>
  <div class="col-md-4">
    <%= label_tag :query, "Search by Name", class: "form-label" %>
    <%= text_field_tag :query, params[:query], class: "form-control", placeholder: "Enter patient name" %>
  </div>

  <div class="col-md-3">
    <%= label_tag :dob_filter, "Filter by Birth Year", class: "form-label" %>
    <%= select_tag :dob_filter, options_for_select((1980..Date.today.year).to_a.reverse, params[:dob_filter]), include_blank: true, class: "form-select" %>
  </div>

  <div class="col-md-2">
    <%= submit_tag "Apply", class: "btn btn-primary w-100" %>
  </div>

  <div class="col-md-2">
    <%= link_to "Clear Filters", receptionist_dashboard_path, class: "btn btn-outline-secondary w-100" %>
  </div>
<% end %>

<!-- Header with Add New Patient button -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">Patient List</h3>
  <%= link_to "Add New Patient", new_patient_path, class: "btn btn-success" %>
</div>

<!-- Patients Table -->
<table class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Date of Birth</th>
      <th>Notes</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @patients.each do |patient| %>
      <tr>
        <td><%= patient.id %></td>
        <td><%= patient.name %></td>
        <td><%= patient.dob.strftime('%Y-%m-%d') if patient.dob %></td>
        <td><%= patient.notes %></td>
        <td>
          <%= link_to 'View', patient_path(patient), class: "btn btn-sm btn-info me-1" %>
          <%= link_to 'Edit', edit_patient_path(patient), class: "btn btn-sm btn-warning me-1" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= render 'shared/delete_patient_modal' %>
